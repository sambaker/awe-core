<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  
<title>Scratch Space for Testing Awe Development</title>

<style>

#red 
{
  position:absolute;
  left:50px;
  top:50px;
  width:100px;
  height:100px;
  background-color:#FFbbbb;
}

#blue
{
  position:absolute;
  left:40px;
  top:40px;
  width:120px;
  height:120px;
  background-color:#0000FF;
}

#content 
{
  position:absolute;
  left:50%;
  top:100px;
}

#outer
{
  position:absolute;
  left:100px;
  top:100px;
  width:800px;
}

</style>

<script src="../awe-core.js"></script>
<script src="../awe-dom.js"></script>
<script src="../awe-state-machine.js"></script>
<script src="../awe-drag.js"></script>
<script src="../awe-drag-helpers.js"></script>

<script>
 
 var r;

function squareClick(clr)
{
  console.log(clr);
}


function dragStart(dragEventObj)
{
  //console.log("start:",dragEventObj);
  _pos = Awe.relXY(r);

  _T = Date.now();
  _C = 0;
}


function dragMove(dragEventObj)
{
  ++_C;
  _pos.x += dragEventObj.delta.x;
  _pos.y += dragEventObj.delta.y;
  Awe.relX(r);
  Awe.relY(r);
  Awe.relXY(r);
//  r.style.left = _pos.x + "px";
//  r.style.top = _pos.y + "px";
  //r.style.WebkitTransform = "translate3d("+_pos.x+"px,"+_pos.y+"px, 0)";
  //console.log(r.left, r.top);
  //Awe.relXY( r, _pos.x, _pos.y );
}

function dragUpdate() {
  r.style.left = _pos.x + "px";
  r.style.top = _pos.y + "px";
}

function dragEnd(dragEventObj)
{
  var now = Date.now();
  _F = _C / ((now - _T) / 1000);
  console.log("Move FPS = ", _F);
  _pos = null;
}


function startup() 
{
  var el = document.getElementById("content");
    
  var text = Awe.createElement("DIV", el, {
    styles: {
      width: "200px",
      height: "200px",
      overflow: "scroll"
    }
  });
    
  text.id = "text";
  text.innerHTML = "Awe environment = " + Awe.objectToString(Awe.env) + "asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf asdf asdf asdf asdf asdf asdf sadf sdfa sdfa sdfa sdfa asdf "
  
  var dragConfigFast = {
    //updater: {},
    onDragStart: dragStart,
    onDragMove: dragMove,
    onDragEnd: dragEnd,
    onDragUpdate: dragUpdate
  }

  var dragConfigSlow = {
    //updater: {},
    onDragStart: dragStart,
    onDragMove: function(e) {
      dragMove(e);
      dragUpdate();
    },
    onDragEnd: dragEnd
  }

  r = document.getElementById("red");
  Awe.enableDrag( document.getElementById("red"), dragConfigFast );
  
  //document.getElementById("red").addEventListener( "mousedown", function() { squareClick("red"); }, false );
  //document.getElementById("blue").addEventListener( "mousedown", function() { squareClick("blue"); }, false );

  //document.getElementById("red").attachEvent( "onmousemove", function() { squareClick("red"); }, false );
  //document.getElementById("blue").attachEvent( "onmousemove", function() { squareClick("blue"); }, false );
}


function test()
{
console.log("B");
  Awe.disableDrag( document.getElementById("red") );
}


window.onload = startup;    


</script>
  
</head>
  
<body>
 
<div id="blue"></div>
<div id="red"></div>

</body>

</html>

